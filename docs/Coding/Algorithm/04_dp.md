# Dynamic Programming

## Linear Dp

### Single Sequence

#### Longest Increasing Subsequence(LIS)

Given an integer array `nums`, return the length of the longest strictly increasing subsequence.

##### Dp Solution

The typical solution for `LIS` is `dp`, we define:

1. `state` dp[i]: the length of LIS which ends with `nums[i]`;
2. `transform`: dp[i] = max(dp[j]) + 1, where $0 \le j < i$ and $nums[j] < nums[i]$;
3. `base case`: dp[0] = 1

And we have the function:

```C++
int Lis(vector<int>& a) {
  int m = a.size();
  vector dp(m, 1);

  for (int i = 1; i < m; ++i) {
    for (int j = 0; j < i; ++j) {
      if (a[j] >= a[i]) continue;
      dp[i] = max(dp[i], dp[j] + 1);
    }
  }

  return *max_element(dp.begin(), dp.end());
}
```

Complexity:

- Time complexity: $O(N^2)$
- Space complexity: $O(N)$

##### Greedy + Binary Search Solution

The general greedy strategy is that we let the subsequence increasing as slowly as posible. So we define an array `d` to store the minimum last number of the subsequence of each lenth, `d[len]` stores the minimum last number of the subsequence of the length i. If current number is greater than `d[len]`, we increase the `len` and update `d[len + 1]` to current number; otherwise we use binary search to update `d[j]` with current number, where `dp[j] >= current number`.

```C++
int Lis(vector<int>& a) {
  auto bs = [](auto& d, int tar, int l, int r) {
    while (l < r) {
      int mid = l + (r - l) / 2;
      if (d[mid] < tar) {
        l = mid + 1;
      } else {
        r = mid;
      }
    }

    return l;
  };
  int m = a.size();
  vector d(m + 1, a[0]);
  int len = 1;

  for (int i = 1; i < m; ++i) {
    if (a[i] > d[len]) {
      d[++len] = a[i];
    } else {
      int j = bs(d, a[i], 1, len);
      d[j] = a[i];
    }
  }

  return len;
}
```

Complexity:

- Time complexity: $O(NlogN)$
- Space complexity: $O(N)$

##### Problems

- [Longest Increasing Subsequence](https://leetcode-cn.com/problems/longest-increasing-subsequence/)
- [Number of Longest Increasing Subsequence](https://leetcode-cn.com/problems/number-of-longest-increasing-subsequence/)
- [Russian Doll Evelopes](https://leetcode-cn.com/problems/russian-doll-envelopes/)

## Pre Sum

## Range Dp
